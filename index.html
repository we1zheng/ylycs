<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿ç­”é¢˜ç³»ç»Ÿ</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            
            
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        /* åˆå§‹é¡µé¢æ ·å¼ */
        .init-page {
            display: flex;
            flex-direction: column;
            justify-content: center; /* æ°´å¹³å±…ä¸­ */
            gap: 20px;
        }

        .init-btn {
            padding: 40px;
            font-size: 24px;
            border: none;
            border-radius: 10px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .init-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* ç­”é¢˜é¡µé¢æ ·å¼ */
        .quiz-page {
            display: none;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn.active {
            background-color: #4CAF50;
            color: white;
        }

        .question-view {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .question-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .submit-btn,
        .reset-btn,
        .back-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn {
            background-color: #4CAF50;
            color: white;
        }

        .back-btn {
            background-color: #f0f0f0;
        }

        .submit-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* ç»“æœé¡µé¢æ ·å¼ */
        .result-container {
            padding: 20px;
            background-color: #f8f8f8;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .score-display {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .wrong-answers {
            margin-top: 20px;
        }

        .wrong-item {
            padding: 15px;
            margin-bottom: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .wrong-item p {
            margin: 5px 0;
        }

        .option {
            padding: 5px;
            margin: 3px 0;
        }

        .correct-option {
            color: green;
            font-weight: bold;
        }

        .wrong-option {
            color: red;
            font-weight: bold;
        }

        .quiz-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .reset-btn {
            background-color: #e80c0c;
            color: white;
        }

        /* æ–°å¢è¯´æ˜æ–‡å­—æ ·å¼ */
        .description {
            margin-top: 20px;
            color: #666;
            font-size: 14px;
            /* text-align: center; */
            text-align: left; /* ç¡®ä¿å†…å®¹å·¦å¯¹é½ */
      font-family: Arial, sans-serif; /* å¯é€‰ï¼šè®¾ç½®å­—ä½“ */
      line-height: 1.5; /* å¯é€‰ï¼šè®¾ç½®è¡Œé«˜ */
        }

        .clear-cache-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #ff4444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* æ–°å¢ç»“æœé¡µé¢è¿”å›æŒ‰é’®æ ·å¼ */
        .result-back-btn {
            margin-top: 20px;
            background-color: #4CAF50;
            color: white;
        }
         /* æ–°å¢ç»“æœé¡µé¢è¿”å›æŒ‰é’®æ ·å¼ */
    .result-back-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    </style>
</head>

<body>
    <div class="container">
        <!-- åˆå§‹é¡µé¢ -->
        <div class="init-page">
            <button class="init-btn" data-category="dataType">æ•°æ®ç±»å‹</button>
            <button class="init-btn" data-category="operator">è¿ç®—ç¬¦</button>
            <button class="init-btn" data-category="inputOutput">è¾“å…¥è¾“å‡º</button>
            <button class="init-btn" data-category="comprehensive">ç»¼åˆ</button>
            <button class="clear-cache-btn">æ¸…é™¤ç­”é¢˜ç¼“å­˜</button>
            <div class="description">
                1ã€åˆæ¬¡è¿›å…¥è¯·ç‚¹å‡»æ¸…é™¤ç­”é¢˜ç¼“å­˜ï¼›<br>
                2ã€ç­”é¢˜ç»“æŸåï¼Œç‚¹å‡»è¿”å›æŒ‰é’®è¿”å›ç­”é¢˜é¡µé¢ï¼›<br>
                3ã€ç‚¹å‡»é‡æ–°ä½œç­”æŒ‰é’®ï¼Œé‡æ–°ä½œç­”å½“å‰é¢˜ç›®ï¼›<br>
                4ã€ç‚¹å‡»æäº¤æŒ‰é’®ï¼Œæäº¤ç­”æ¡ˆå¹¶æŸ¥çœ‹ç»“æœã€‚
            </div>
          </div>
          
        <!-- ç­”é¢˜é¡µé¢ -->
        <div class="quiz-page">
            <div class="quiz-title" id="quizTitle"></div>
            <div id="questionArea" class="question-view"></div>
            <div class="button-group">
              <button class="back-btn" id="backBtn">è¿”å›</button>
              <button class="reset-btn" id="resetBtn">é‡æ–°ä½œç­”</button>
              <button class="submit-btn" id="submitBtn">æäº¤</button>
            </div>
          </div>
        </div>
        
    <script>
        const questionBank = {
            dataType: [
                {
                    question: "ä»¥ä¸‹å“ªä¸ªæ˜¯JavaScriptçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ",
                    options: ["A. æ•°ç»„", "B. å­—ç¬¦ä¸²", "C. å¯¹è±¡", "D. å‡½æ•°"],
                    answer: "B"
                },
                {
                    question: "typeof null çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ",
                    options: ["A. null", "B. object", "C. undefined", "D. string"],
                    answer: "B"
                }
                // ... å…¶ä»–é¢˜ç›®
            ],
            operator: [
                {
                    question: "ä»¥ä¸‹å“ªä¸ªæ˜¯é€»è¾‘è¿ç®—ç¬¦ï¼Ÿ",
                    options: ["A. +", "B. &&", "C. ==", "D. !"],
                    answer: "B"
                }
                // ... å…¶ä»–é¢˜ç›®
            ],
            inputOutput: [
                {
                    question: "ä»¥ä¸‹å“ªä¸ªæ–¹æ³•å¯ä»¥å¼¹å‡ºè¾“å…¥æ¡†ï¼Ÿ",
                    options: ["A. alert()", "B. confirm()", "C. prompt()", "D. console.log()"],
                    answer: "C"
                }
                // ... å…¶ä»–é¢˜ç›®
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            const initPage = document.querySelector('.init-page');
            const quizPage = document.querySelector('.quiz-page');
            const initButtons = document.querySelectorAll('.init-btn');
            const navButtons = document.querySelectorAll('.nav-btn');
            const questionArea = document.getElementById('questionArea');
            const submitBtn = document.getElementById('submitBtn');
            const backBtn = document.getElementById('backBtn');
            let currentCategory = 'dataType';
            let currentQuestions = [];

            // åˆå§‹åŒ–æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            initButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentCategory = btn.dataset.category;
                    initPage.style.display = 'none';
                    quizPage.style.display = 'block';
                    document.getElementById('quizTitle').textContent = `å½“å‰ç­”é¢˜ç±»å‹ï¼š${getCategoryName(currentCategory)}`;
                    loadQuestions(currentCategory);
                    loadProgress(); // åŠ è½½è¿›åº¦
                });
            });

            // æ¸…é™¤ç¼“å­˜æŒ‰é’®
            document.querySelector('.clear-cache-btn').addEventListener('click', () => {
                if (confirm('ç¡®å®šè¦æ¸…é™¤å…¨éƒ¨ç­”é¢˜ç¼“å­˜å—ï¼Ÿ')) {
                    localStorage.clear();
                    alert('ç­”é¢˜ç¼“å­˜å·²æ¸…é™¤');
                }
            });

            // é‡æ–°ä½œç­”æŒ‰é’®
            document.getElementById('resetBtn').addEventListener('click', () => {
                if (confirm('ç¡®å®šè¦é‡æ–°ä½œç­”å—ï¼Ÿå½“å‰é€‰æ‹©å°†ä¼šè¢«æ¸…é™¤')) {
                    clearProgress();
                    // ä»…æ¸…é™¤é€‰æ‹©ï¼Œä¸é‡æ–°åŠ è½½é¢˜ç›®
                    const inputs = document.querySelectorAll('input[type="radio"]');
                    inputs.forEach(input => input.checked = false);
                }
            });

            // ä¿å­˜è¿›åº¦
            function saveProgress() {
                const answers = getSelectedAnswers();
                localStorage.setItem(currentCategory, JSON.stringify({
                    answers,
                    timestamp: new Date().getTime()
                }));
            }

            // åŠ è½½è¿›åº¦
            function loadProgress() {
                const progress = JSON.parse(localStorage.getItem(currentCategory));
                if (progress) {
                    progress.answers.forEach((answer, index) => {
                        if (answer) {
                            const selector = `input[name="q${index}"][value="${answer}"]`;
                            const input = document.querySelector(selector);
                            if (input) {
                                input.checked = true;
                            }
                        }
                    });
                }
            }

            // æ¸…é™¤è¿›åº¦
            function clearProgress() {
                localStorage.removeItem(currentCategory);
            }

            // è·å–åˆ†ç±»åç§°
            function getCategoryName(category) {
                const names = {
                    dataType: 'æ•°æ®ç±»å‹',
                    operator: 'è¿ç®—ç¬¦',
                    inputOutput: 'è¾“å…¥è¾“å‡º',
                    comprehensive: 'ç»¼åˆ'
                };
                return names[category];
            }

            // ä¿®æ”¹é€‰é¡¹ç‚¹å‡»äº‹ä»¶ä»¥ä¿å­˜è¿›åº¦
            document.addEventListener('change', (e) => {
                if (e.target.matches('input[type="radio"]')) {
                    saveProgress();
                }
            });

            // ä¿®æ”¹è¿”å›æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            backBtn.addEventListener('click', () => {
                quizPage.style.display = 'none';
                initPage.style.display = 'flex';
                questionArea.innerHTML = '';
                // é‡ç½®é‡æ–°ä½œç­”æŒ‰é’®çŠ¶æ€
                document.getElementById('resetBtn').style.display = 'inline-block';
                submitBtn.disabled = false;
            });

            // å¯¼èˆªæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentCategory = btn.dataset.category;
                    loadQuestions(currentCategory);
                    navButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });

            // æäº¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            submitBtn.addEventListener('click', () => {
                if (confirm('ç¡®å®šè¦æäº¤ç­”æ¡ˆå—ï¼Ÿ')) {
                    const userAnswers = getSelectedAnswers();
                    const { score, totalScore, wrongAnswers } = calculateScore(userAnswers);
                    showResult(score, totalScore, wrongAnswers);
                    // éšè—é‡æ–°ä½œç­”æŒ‰é’®
                    document.getElementById('resetBtn').style.display = 'none';
                    submitBtn.disabled = true;
                }
            });

            function loadQuestions(category) {
                currentQuestions = getRandomQuestions(category);
                questionArea.innerHTML = currentQuestions
                    .map((q, index) => `
            <div class="question-item">
              <p>${index + 1}. ${q.question}</p>
              <div class="options">
                ${q.options.map(opt => `
                  <label>
                    <input type="radio" name="q${index}" value="${opt[0]}">
                    ${opt}
                  </label>
                `).join('')}
              </div>
            </div>
          `).join('');
                submitBtn.disabled = false;
            }

            function getRandomQuestions(category, count = 5) {
                let questions;
                if (category === 'comprehensive') {
                    questions = getAllQuestions();
                    count = 10;
                } else {
                    questions = [...questionBank[category]];
                }
                const shuffled = questions.sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }

            function getAllQuestions() {
                return [
                    ...questionBank.dataType,
                    ...questionBank.operator,
                    ...questionBank.inputOutput
                ];
            }

            function getSelectedAnswers() {
                return currentQuestions.map((_, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    return selected ? selected.value : null;
                });
            }

            function calculateScore(userAnswers) {
                const scorePerQuestion = currentCategory === 'comprehensive' ? 10 : 20;
                const totalScore = currentQuestions.length * scorePerQuestion;
                let score = 0;
                const wrongAnswers = [];

                userAnswers.forEach((answer, index) => {
                    if (answer === currentQuestions[index].answer) {
                        score += scorePerQuestion;
                    } else {
                        wrongAnswers.push({
                            question: currentQuestions[index].question,
                            options: currentQuestions[index].options,
                            correctAnswer: currentQuestions[index].answer,
                            userAnswer: answer
                        });
                    }
                });

                return { score, totalScore, wrongAnswers };
            }

            function showResult(score, totalScore, wrongAnswers) {
                const resultContainer = document.createElement('div');
                resultContainer.className = 'result-container';

                const scoreDisplay = document.createElement('div');
                scoreDisplay.className = 'score-display';
                scoreDisplay.textContent = `å¾—åˆ†ï¼š${score}/${totalScore}`;

                if (score === totalScore) {
                    scoreDisplay.style.color = 'green';
                    scoreDisplay.innerHTML += ' ğŸ‰ å¤ªæ£’äº†ï¼å…¨éƒ¨ç­”å¯¹ï¼';
                } else {
                    scoreDisplay.style.color = 'red';
                    scoreDisplay.innerHTML += ' ğŸ˜¢ å†ä»”ç»†ç‚¹è¦ä¸ï¼Ÿï¼';
                }

                resultContainer.appendChild(scoreDisplay);

                if (wrongAnswers.length > 0) {
                    const wrongAnswersContainer = document.createElement('div');
                    wrongAnswersContainer.className = 'wrong-answers';
                    wrongAnswersContainer.innerHTML = '<h3>é”™é¢˜è§£æï¼š</h3>';

                    wrongAnswers.forEach((wrong, index) => {
                        const wrongItem = document.createElement('div');
                        wrongItem.className = 'wrong-item';

                        wrongItem.innerHTML = `
              <p><strong>ç¬¬${index + 1}é¢˜ï¼š</strong>${wrong.question}</p>
              <div class="options-display">
            `;

                        wrong.options.forEach(option => {
                            const isCorrect = option[0] === wrong.correctAnswer;
                            const isUserChoice = option[0] === wrong.userAnswer;
                            let optionClass = '';
                            if (isCorrect) {
                                optionClass = 'correct-option';
                            } else if (isUserChoice) {
                                optionClass = 'wrong-option';
                            }

                            wrongItem.innerHTML += `
                <div class="option ${optionClass}">
                  ${option}
                </div>
              `;
                        });

                        wrongItem.innerHTML += '</div>';
                        wrongAnswersContainer.appendChild(wrongItem);
                    });

                    resultContainer.appendChild(wrongAnswersContainer);
                }
      // æ·»åŠ è¿”å›ç­”é¢˜é¡µé¢æŒ‰é’®
      const resultBackBtn = document.createElement('button');
      resultBackBtn.className = 'result-back-btn';
      resultBackBtn.textContent = 'è¿”å›ç­”é¢˜';
      resultBackBtn.addEventListener('click', () => {
        // æ¸…é™¤ç»“æœé¡µé¢
        questionArea.innerHTML = '';
        // é‡æ–°åŠ è½½é¢˜ç›®å¹¶æ¢å¤è¿›åº¦
        loadQuestions(currentCategory);
        loadProgress();
        // æ¢å¤æŒ‰é’®ç»„æ˜¾ç¤º
        document.querySelector('.button-group').style.display = 'flex';
        // æ¢å¤é‡æ–°ä½œç­”æŒ‰é’®
        document.getElementById('resetBtn').style.display = 'inline-block';
        // å¯ç”¨æäº¤æŒ‰é’®
        submitBtn.disabled = false;
      });

      resultContainer.appendChild(resultBackBtn);

      questionArea.innerHTML = '';
      questionArea.appendChild(resultContainer);

      // éšè—åŸæœ‰æŒ‰é’®ç»„
      document.querySelector('.button-group').style.display = 'none';
    }
      // ä¿®æ”¹è¿”å›æŒ‰é’®åŠŸèƒ½
    backBtn.addEventListener('click', () => {
      // å¦‚æœæ˜¯ç»“æœé¡µé¢ï¼Œè¿”å›ç­”é¢˜é¡µé¢
      if (document.querySelector('.result-container')) {
        // æ¸…é™¤ç»“æœé¡µé¢
        questionArea.innerHTML = '';
        // é‡æ–°åŠ è½½é¢˜ç›®å¹¶æ¢å¤è¿›åº¦
        loadQuestions(currentCategory);
        loadProgress();
        // æ¢å¤æŒ‰é’®ç»„æ˜¾ç¤º
        document.querySelector('.button-group').style.display = 'flex';
        // æ¢å¤é‡æ–°ä½œç­”æŒ‰é’®
        document.getElementById('resetBtn').style.display = 'inline-block';
        // å¯ç”¨æäº¤æŒ‰é’®
        submitBtn.disabled = false;
      } else {
        // å¦‚æœæ˜¯ç­”é¢˜é¡µé¢ï¼Œè¿”å›é¦–é¡µ
        quizPage.style.display = 'none';
        initPage.style.display = 'flex';
        questionArea.innerHTML = '';
        document.getElementById('resetBtn').style.display = 'inline-block';
        submitBtn.disabled = false;
      }
    });
 });
 // ä¿®æ”¹loadQuestionså‡½æ•°
 function loadQuestions(category) {
      currentQuestions = getRandomQuestions(category);
      questionArea.innerHTML = currentQuestions
        .map((q, index) => `
          <div class="question-item">
            <p>${index + 1}. ${q.question}</p>
            <div class="options">
              ${q.options.map(opt => `
                <label>
                  <input type="radio" name="q${index}" value="${opt[0]}">
                  ${opt}
                </label>
              `).join('')}
            </div>
          </div>
        `).join('');
      submitBtn.disabled = false;
      // åŠ è½½åç«‹å³æ¢å¤è¿›åº¦
      loadProgress();
    }
    </script>
</body>

</html>
